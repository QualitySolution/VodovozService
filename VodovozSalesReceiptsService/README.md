# Приложение по автоматической фискализации чеков (интернет-магазина) "Модуль Касса"
## Общие сведения
Приложение каждые 2 минуты опрашивает нашу БД на наличие новых завершённых заказов. При наличии заказов, клиентам которых нужно отправить чеки, приложение генерирует для каждого заказа DTO объект кассового чека и отправляет его на сервер фискализации. При разработке использовалась документация VodovozSalesReceiptsService/Docs/API автоматической фискализации чеков интернет-магазинов (ver.1.4).pdf.

## Перед запуском
Перед запуском службы нужно в личном кабинете, к которому привязана касса, создать точку продаж, активировать её, установить для неё опцию "Использовать для документов интернет-магазина", записать её идентификатор (вида 1234AbCd-12aB-XXXX-XXXX-XXXXXxxxXXXX).
Используя любую среду разработки API (например Postman) и логин+пароль к учётной записи МодульКасса, ассоциировать точку продаж, обратившись к API кассы (https://my.modulkassa.ru/api/fn/v1/associate/1234AbCd-12aB-XXXX-XXXX-XXXXXxxxXXXX). В полученном JSON объекте содержится имя пользователя и пароль которые необходимо внести в файл vodovoz-sales-receipts-service.conf. Дальнейшая переассоциация не требуется, если не меняется розничная точка или не произошла компрометация логина или пароля.

## Описание некоторых полей файла vodovoz-sales-receipts-service.conf
[ModulKassa] - название секции
base_address - адрес для обращения к API модуль кассы
user_name и password - имя и пароль пользователя полученные методом associate
